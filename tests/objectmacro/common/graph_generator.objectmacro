Macro main
    Param
        class_name : String;
        package : package_declaration;
        macro_declarations : new_macro, separator="\n", before_first="\n";
        macro_links : add_macro(class_name), separator="\n", before_first="\n";
        builders : builder;
{Body}
{package}

public class {class_name}{{

    public static long exec_time = 0;
{Indent: "\t"}
{macro_declarations}
{End}

{Indent: "\t"}
public static void main(
            String[] args){{

{Indent: "\t"}
long start = System.nanoTime();
{macro_links}
{builders}
{End}
}
{End}
}
{End}

Macro builder
    Param
        macro_name : String;
{Body}
m{macro_name}.build();
{End}


Macro package_declaration
    Param
        name : String;
{Body}
package {name};

import {name}.macro.*;
{End}

Macro new_macro
    Param
        macro_name : String;
        param_name : String;
{Body}
private static {macro_name} m{param_name} = new {macro_name}();
{End}

Macro add_macro
    Param
        receiver : String;
        added : String;
        param_name : String;
    Internal
        class_name : String;
{Body}
if(!m{receiver}.add{param_name}(m{added})){
    long end = System.nanoTime();
    {class_name}.exec_time = end - start;
    return;
}
{End}
